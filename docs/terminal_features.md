# 终端交互功能说明

Yufmath 提供了增强的终端交互模式，为用户提供更好的数学计算体验。

## 🎨 主要特性

### 1. 彩色语法高亮

终端模式支持彩色输出，不同类型的数学元素使用不同颜色显示：

- **数字**: 青色 (Cyan)
- **变量**: 绿色 (Green)  
- **常量**: 洋红色 (Magenta)
- **运算符**: 黄色 (Yellow)
- **函数名**: 蓝色 (Blue)
- **括号**: 白色 (White)
- **近似值**: 灰色 (Bright Black)

### 2. 数值近似值显示

对于无法精确表示的数值，系统会自动显示近似值：

```
yufmath> sqrt(3)
√(3) ≈ 1.732051

yufmath> pi/2
π ≈ 3.141593/2 ≈ 1.570796 ≈ 1.570796

yufmath> 22/7
22/7 ≈ 3.142857
```

### 3. 智能数学符号

使用更直观的数学符号替代ASCII字符：

- `×` 替代 `*` (乘法)
- `÷` 替代 `/` (除法)  
- `≠` 替代 `!=` (不等于)
- `≤` 替代 `<=` (小于等于)
- `≥` 替代 `>=` (大于等于)
- `√` 用于平方根
- `π` 用于圆周率
- `∞` 用于无穷大

### 4. 增强的用户界面

- 彩色提示符: `yufmath> `
- 美观的启动信息
- 友好的错误提示
- 多行输入支持

## 🛠️ 配置选项

### 基本命令

| 命令 | 功能 |
|------|------|
| `help` 或 `?` | 显示帮助信息 |
| `quit`, `exit`, `q` | 退出程序 |
| `clear` | 清空所有变量 |
| `vars` 或 `variables` | 显示所有变量 |

### 显示控制

| 命令 | 功能 |
|------|------|
| `colors` | 切换颜色输出开关 |
| `approx` 或 `approximations` | 切换数值近似值显示 |
| `verbose` | 切换详细模式 |

### 格式化设置

| 命令 | 功能 |
|------|------|
| `format <type>` | 设置输出格式 |
| `precision <n>` | 设置数值精度 |
| `approx_precision <n>` | 设置近似值显示精度 |

#### 支持的格式类型

- `standard`: 标准数学记号
- `terminal`: 终端彩色格式（默认）
- `latex`: LaTeX 格式
- `mathml`: MathML 格式

## 📚 使用示例

### 基本计算

```
yufmath> 2 + 3 * 4
2 + 3 × 4 ≈ 14.000000

yufmath> sqrt(2)
√(2) ≈ 1.414214

yufmath> sin(pi/2)
sin(π ≈ 3.141593/2 ≈ 1.570796) ≈ 1.000000
```

### 变量赋值

```
yufmath> x = 5
x = 5

yufmath> y = x^2 + 2*x + 1
y = x^2 + 2x + 1 ≈ 36.000000
```

### 复数运算

```
yufmath> 3 + 4i
3+4i

yufmath> (1 + i)^2
(1 + i)^2 ≈ 2.000000i
```

### 配置调整

```
yufmath> colors
颜色输出: 关闭

yufmath> approx_precision 3
近似值精度已设置为: 3

yufmath> sqrt(2)
√(2) ≈ 1.414
```

## 🔧 高级功能

### 多行输入

使用反斜杠 `\` 进行行续接：

```
yufmath> x^2 + \
     ... 2*x + \
     ... 1
x^2 + 2x + 1
```

### 历史记录

- 自动保存输入历史到 `yufmath_history.txt`
- 支持上下箭头键浏览历史
- 支持 Ctrl+R 搜索历史

### 快捷键

- `Ctrl+C`: 中断当前输入
- `Ctrl+D`: 退出程序
- `↑/↓`: 浏览历史记录
- `Tab`: 自动补全（计划中）

## 🎯 最佳实践

1. **启用颜色**: 在支持颜色的终端中使用彩色输出以获得最佳体验
2. **调整精度**: 根据需要调整近似值显示精度
3. **使用变量**: 对于复杂计算，使用变量存储中间结果
4. **查看帮助**: 使用 `help` 命令了解所有可用功能

## 🐛 故障排除

### 颜色显示异常

如果颜色显示不正常，可以：

```
yufmath> colors
颜色输出: 关闭
```

### 近似值过多

如果近似值显示过多影响阅读：

```
yufmath> approx
数值近似值: 关闭
```

### 精度问题

调整显示精度：

```
yufmath> approx_precision 4
近似值精度已设置为: 4
```

## 📈 性能提示

- 复杂表达式的近似值计算可能较慢
- 可以通过关闭近似值显示来提高响应速度
- 使用变量存储复杂计算结果以避免重复计算